{{!-- Activation Cost --}}
<div class="form-group input-select">
    <label>{{ localize "DND5E.ItemActivationCost" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.activation.cost"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "activation.cost" }}"
            placeholder="&mdash;"
        />
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.activation.type">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "activation.type")}}
            <option value=""></option>
            {{#each config.abilityActivationTypes as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
    </div>
</div>

{{!-- Hides every subsequent field if there's no Activation Cost --}}
{{#if (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "activation.type")}}

{{!-- Activation Condition --}}
<div class="form-group">
    <label>{{ localize "DND5E.ItemActivationCondition" }}</label>
    <div class="form-fields">
        <input type="text" name="system.usageProfiles.{{options.selectedUsageProfile}}.activation.condition"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "activation.condition" }}"
        />
    </div>
</div>

{{#if isCrewed}}
<div class="form-group">
    <label>{{localize 'DND5E.Cover'}}</label>
    <div class="form-fields">
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.cover" data-dtype="Number">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "cover")}}
                <option value="">&mdash;</option>
                {{#each config.cover as |v k|}}
                    <option value="{{k}}">{{v}}</option>
                {{/each}}
            {{/select}}
        </select>
    </div>
</div>
{{/if}}

{{!-- Ability Target --}}
<div class="form-group input-select-select">
    <label>{{ localize "DND5E.Target" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.target.value"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "target.value" }}" placeholder="&mdash;">
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.target.units">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "target.units")}}
            <option value=""></option>
            {{#each config.distanceUnits as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.target.type">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "target.type")}}
            <option value=""></option>
            {{#each config.targetTypes as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
    </div>
</div>

{{!-- Ability Target Width --}}
{{#if isLine}}
<div class="form-group input-select-select">
    <label>{{ localize "DND5E.TargetWidth" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.target.width"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "target.width" }}" placeholder="&mdash;">
    </div>
</div>
{{/if}}

{{!-- Ability Range --}}
<div class="form-group input-select">
    <label>{{ localize "DND5E.Range" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.range.value"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "range.value" }}" placeholder="{{localize 'DND5E.Normal'}}">
        <span class="sep">/</span>
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.range.long"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "range.long" }}" placeholder="{{localize 'DND5E.Max'}}">
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.range.units">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "range.units")}}
            <option value=""></option>
            {{#each config.distanceUnits as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
    </div>
</div>

{{!-- Effect Duration --}}
<div class="form-group input-select">
    <label>{{ localize "DND5E.Duration" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.duration.value" value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "duration.value" }}"
            placeholder="&mdash;">
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.duration.units">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "duration.units")}}
            <option value=""></option>
            {{#each config.timePeriods as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
    </div>
</div>

{{!-- Limited Uses --}}
<div class="form-group uses-per">
    <label>{{ localize "DND5E.LimitedUses" }}</label>
    <div class="form-fields">
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.uses.value" value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "uses.value" }}">
        <span class="sep">{{ localize "DND5E.of" }}</span>
        <input type="text" name="system.usageProfiles.{{options.selectedUsageProfile}}.uses.max" value="{{source.uses.max}}">
        <span class="sep">{{ localize "DND5E.per" }}</span>
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.uses.per">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "uses.per")}}
            <option value=""></option>
            {{#each config.limitedUsePeriods as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
    </div>
</div>

{{#if (eq (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "uses.per") "charges")}}
<div class="form-group">
    <label>{{localize "DND5E.RecoveryFormula"}}</label>
    <div class="form-fields">
        <input type="text" name="system.usageProfiles.{{options.selectedUsageProfile}}.uses.recovery"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "uses.recovery" }}"
        />
    </div>
</div>
{{/if}}

{{!-- Consumption --}}
<div class="form-group uses-per">
    <label>{{ localize "DND5E.ConsumeTitle" }}</label>
    <div class="form-fields">
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.consume.type">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "consume.type")}}
            <option value=""></option>
            {{#each config.abilityConsumptionTypes as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
        <select name="system.usageProfiles.{{options.selectedUsageProfile}}.consume.target">
            {{#select (getProperty (lookup system.usageProfiles options.selectedUsageProfile) "consume.target")}}
            <option value=""></option>
            {{#each abilityConsumptionTargets as |name key|}}
            <option value="{{key}}">{{name}}</option>
            {{/each}}
            {{/select}}
        </select>
        <input type="number" step="any" name="system.usageProfiles.{{options.selectedUsageProfile}}.consume.amount"
            value="{{ getProperty (lookup system.usageProfiles options.selectedUsageProfile) "consume.amount" }}"
        />
    </div>
</div>

{{/if}}